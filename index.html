<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Reading Hub</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="A mobile-first, dark-themed documentation site">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="manifest" href="manifest.json">
  <style>
    :root {
      --theme-color: #42b983;
      --sidebar-nav-link-color: #364149;
      --sidebar-nav-link-color--active: var(--theme-color);
      --sidebar-nav-link-border-color--active: var(--theme-color);
    }

    /* Content layout adjustments */
    .content {
      padding-top: 20px;
      padding-bottom: 20px;
      padding-left: 15px;
      padding-right: 15px;
    }

    @media screen and (min-width: 768px) {
      .content {
        padding-left: 30px;
        padding-right: 30px;
      }
    }
    
    /* Dark theme styles */
    body.dark-theme {
      --theme-color: #42b983;
      --base-background-color: #1a1a1a;
      --base-color: #ffffff;
      --heading-color: #ffffff;
      --sidebar-background: #2a2a2a;
      --sidebar-nav-link-color: #ffffff;
      --search-input-background: #2a2a2a;
      --search-input-border-color: #3a3a3a;
    }

    /* Theme toggle button */
    .theme-toggle {
      position: fixed;
      top: 0;
      right: 0;
      z-index: 100;
      margin: 1rem;
      padding: 8px;
      border: none;
      background: transparent;
      cursor: pointer;
      color: var(--theme-color);
    }

    /* Breadcrumb styles */
    .breadcrumb {
      padding: 8px 15px;
      margin-bottom: 20px;
      background-color: var(--sidebar-background);
      border-radius: 4px;
    }

    .breadcrumb span {
      color: var(--base-color);
    }

    .breadcrumb span + span:before {
      content: ">";
      padding: 0 8px;
      color: var(--base-color);
    }

    /* Mobile styles */
    @media screen and (max-width: 768px) {
      .sidebar-toggle {
        display: block !important;
      }
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.25s ease-out;
      }
      .sidebar.open {
        transform: translateX(0);
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
  <div id="app"></div>
  <script>
    // Theme toggle functionality
    const themeToggle = document.querySelector('.theme-toggle');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    const storedTheme = localStorage.getItem('theme');
    
    function setTheme(isDark) {
      document.body.classList.toggle('dark-theme', isDark);
      themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }
    
    // Initialize theme
    setTheme(storedTheme === 'dark' || (storedTheme === null && prefersDark.matches));
    themeToggle.addEventListener('click', () => setTheme(!document.body.classList.contains('dark-theme')));

    // Docsify configuration
    window.$docsify = {
      name: 'My Reading Hub',
      loadSidebar: '_sidebar.md',
      subMaxLevel: 2,
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: 'Search...',
        noData: 'No results found.',
        depth: 6
      },
      auto2top: true,
      coverpage: false,
      // Custom plugin for breadcrumb
      plugins: [
        function(hook) {
          hook.afterEach(function(html) {
            const path = window.location.hash.split('/').filter(Boolean);
            if (path.length === 0) return html;
            
            const breadcrumbs = ['Home', ...path.slice(0, -1).map(p => p.charAt(0).toUpperCase() + p.slice(1))];
            const breadcrumbHtml = `
              <div class="breadcrumb">
                ${breadcrumbs.map(b => `<span>${b}</span>`).join('')}
              </div>`;
            return breadcrumbHtml + html;
          });
        }
      ]
    };

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') {
        const prevLink = document.querySelector('.pagination-item--previous a');
        if (prevLink) prevLink.click();
      } else if (e.key === 'ArrowRight') {
        const nextLink = document.querySelector('.pagination-item--next a');
        if (nextLink) nextLink.click();
      }
    });

    // Service Worker registration
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
</body>
</html>